@model OrdersPageViewModel
@if(@Model.BuyerName != "")
{
  <h1>Управление заказами: @Model.BuyerName</h1>
}
else
{
  <h1>Управление заказами</h1>
}
<ul class="nav nav-tabs">
  <li class="nav-item">
    <a class="nav-link active" data-bs-toggle="tab" href="#msg">Необработанные заказы
      <span class="badge bg-success rounded-pill fw-bold mt-1">@Model.UnproccessedOrdersCount</span>
    </a>
  </li>
  <li class="nav-item">
    <a class="nav-link" data-bs-toggle="tab" href="#pro">История заказов</a>
  </li>
</ul>

<!-- Tab panes -->
<div class="tab-content">
  <div class="tab-pane container active" id="msg">
   @if (Model.UnproccessedOrdersCount > 0)
    {
    <table class="table table-hover table-fixed align-middle text-center">
    <thead>
        <tr>
        <th>#</th>
        <th>Дата заказа</th>
        <th>Количество</th>
        <th>Сумма</th>
        <th>Скидка</th>
        <th class="fw-bold">Статус</th>
        <th></th>
        </tr>
    </thead>
    <tbody>
    @foreach (var item in Model.UnproccessedOrders)
    {
        string discount = @item.TotalDiscount == 0 ? "-" : @item.TotalDiscount.ToString("N2");
        string finalPrice = (@item.TotalPrice - @item.TotalDiscount).ToString("N2");
        string status = @item.IsProccessed == false ? "В обработке" : "Обработан";
        string statusColor = @item.IsProccessed == false ? "danger" : "success";
        <tr class="table-@statusColor ">
            <th>@item.OrderId</th>
            <td>@item.OrderDate.ToString("dd.MM.yyyy")</td>
            <td>@item.TotalItems</td>
            <td>@finalPrice</td>
            <td>@discount</td>
            <td class="fw-bold text-@statusColor">@status</td>
            <td>
                <a asp-controller="Orders" asp-action="GetOrderDetails" asp-route-id="@item.OrderId" class="btn btn-primary"><i class="fa-solid fa-circle-info"></i></a>
            </td>
        </tr>
    }
        </tbody>
    </table>
    }
    else
    {
        <div class="">
            <div class="h-150 py-5 services-icon-wap shadow">
                <div class="h1 text-success text-center"><i class="fa-solid fa-heart-crack"></i></div>
                <div class="row px-4 mx-4">
                    <h2 class="h5 mt-2 text-center fw-light">Пока что вы еще ничего не заказывали!</h2>
                    <a asp-controller="Catalog" asp-action="Index" class="btn btn-success mt-4 fw-bold ">
                        Исправить!
                        <i class="fa-solid fa-bag-shopping"></i>
                    </a>
                </div>
            </div>
        </div>
    }
  </div>
  <div class="tab-pane container fade" id="pro">This is a profile tab.</div>
</div>
